<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <title>The Vault – Y2K Sportsbook</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/web3@1.8.2/dist/web3.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: #000;
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 24px;
      padding: 32px;
      width: 90%;
      max-width: 400px;
      backdrop-filter: blur(20px);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .logo {
      font-size: 36px;
      font-weight: 600;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 14px;
      color: rgba(255,255,255,0.6);
      letter-spacing: 2px;
      margin-bottom: 32px;
    }

    .verification-ring {
      width: 140px;
      height: 140px;
      margin: 0 auto 24px;
      position: relative;
    }

    .progress-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }

    .progress-ring-path {
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
      stroke-dasharray: 326.72;
      stroke-dashoffset: 326.72;
      transition: stroke-dashoffset 0.6s ease;
      stroke-linecap: round;
    }

    .verification-status {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100px;
      height: 100px;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2;
    }

    .token-logo {
      width: 110px;
      height: 110px;
      background-image: url('https://raw.githubusercontent.com/LandoCrissian/y2k-roast-arcade/refs/heads/main/IMG_5445.jpeg');
      background-size: cover;
      background-position: center;
      border-radius: 50%;
    }

    .lock-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3;
    }

    .amount {
      font-size: 32px;
      font-weight: 600;
      background: linear-gradient(135deg, #ffffff, #a5b4fc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .token {
      font-size: 14px;
      color: rgba(255,255,255,0.6);
      margin-bottom: 24px;
    }

    .status-item {
      margin: 10px 0;
      font-size: 14px;
      color: rgba(255,255,255,0.8);
    }

    .connect-button {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      margin-top: 20px;
    }

    .status-message {
      margin-top: 12px;
      font-size: 14px;
      color: rgba(255,255,255,0.8);
    }

    .vault-loader.hidden {
      display: none;
    }

    .vault-loader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #000;
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    .loader-text {
      margin-top: 20px;
      color: #6366f1;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="vaultLoader" class="vault-loader hidden">
    <div class="loader-text">ACCESS GRANTED - OPENING VAULT</div>
  </div>

  <div class="glass-card">
    <div class="logo" id="logoTrigger">Y2K</div>
    <div class="subtitle">VAULT ACCESS</div>

    <div class="verification-ring">
      <svg class="progress-ring" width="120" height="120">
        <circle class="progress-ring-circle" stroke="#ffffff20" stroke-width="4" fill="transparent" r="52" cx="60" cy="60"/>
        <circle class="progress-ring-path" stroke="#6366f1" stroke-width="4" fill="transparent" r="52" cx="60" cy="60"/>
      </svg>
      <div class="verification-status" id="verificationIcon">
        <div class="token-logo"></div>
        <div class="lock-overlay">
          <svg class="lock-icon" viewBox="0 0 24 24" width="32" height="32">
            <path fill="currentColor" d="M12 1C8.676 1 6 3.676 6 7v2H4v14h16V9h-2V7c0-3.324-2.676-6-6-6zm0 2c2.276 0 4 1.724 4 4v2H8V7c0-2.276 1.724-4 4-4z"/>
          </svg>
        </div>
      </div>
    </div>

    <div class="amount">4,000,000</div>
    <div class="token">Y2K REQUIRED</div>

    <div class="status-item" id="connection-status">Ready to Connect</div>
    <div class="status-item" id="verification-status">Awaiting Verification</div>
    <div class="status-item" id="token-status">Token Check Pending</div>

    <button id="connectBtn" class="connect-button">Connect Wallet →</button>
    <div id="status" class="status-message"></div>
  </div>

  <script>
  const Y2K_TOKEN = "0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d";
  const Y2K_DECIMALS = 18;
  const REQUIRED_TOKENS = 4000000;
  let provider;
  let web3;
  let logoClickCount = 0;
  let lastClickTime = 0;

  function updateVerificationProgress(progress) {
    const circle = document.querySelector('.progress-ring-path');
    const radius = circle.r.baseVal.value;
    const circumference = radius * 2 * Math.PI;
    const offset = circumference - (progress / 100 * circumference);
    circle.style.strokeDashoffset = offset;
  }

  function setStatusActive(id, active = true) {
    const el = document.getElementById(id);
    if (el) el.style.opacity = active ? '1' : '0.4';
  }

  function updateStatus(msg) {
    const el = document.getElementById('status');
    el.innerText = msg;
  }

  function showVaultLoader() {
    document.getElementById('vaultLoader').classList.remove('hidden');
    setTimeout(() => window.location.href = "vault.html", 3000);
  }

  async function switchToCronosNetwork() {
    try {
      await provider.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: '0x19' }] });
    } catch (e) {
      if (e.code === 4902) {
        await provider.request({
          method: 'wallet_addEthereumChain',
          params: [{
            chainId: '0x19',
            chainName: 'Cronos Mainnet',
            nativeCurrency: { name: 'Cronos', symbol: 'CRO', decimals: 18 },
            rpcUrls: ['https://evm.cronos.org'],
            blockExplorerUrls: ['https://cronoscan.com/']
          }]
        });
      } else {
        throw new Error("Failed to switch to Cronos.");
      }
    }
  }

  async function connectWallet() {
    try {
      updateStatus("Requesting Wallet Access...");
      setStatusActive('connection-status', true);
      updateVerificationProgress(10);

      provider = window.ethereum;
      if (!provider) throw new Error("No wallet detected.");
      web3 = new Web3(provider);

      const accounts = await provider.request({ method: 'eth_requestAccounts' });
      const account = accounts[0];

      updateStatus("Switching to Cronos...");
      updateVerificationProgress(30);
      await switchToCronosNetwork();

      updateStatus("Checking Y2K balance...");
      updateVerificationProgress(60);
      setStatusActive('verification-status', true);

      const contract = new web3.eth.Contract([{
        constant: true,
        inputs: [{ name: "_owner", type: "address" }],
        name: "balanceOf",
        outputs: [{ name: "balance", type: "uint256" }],
        type: "function"
      }], Y2K_TOKEN);

      const balance = await contract.methods.balanceOf(account).call();
      const readable = parseFloat(balance) / Math.pow(10, Y2K_DECIMALS);
      updateVerificationProgress(90);

      if (readable >= REQUIRED_TOKENS) {
        updateStatus("Access Granted. Opening Vault...");
        setStatusActive('token-status', true);
        updateVerificationProgress(100);
        setTimeout(showVaultLoader, 1000);
      } else {
        updateStatus(`Insufficient Y2K: ${readable.toLocaleString()} / ${REQUIRED_TOKENS.toLocaleString()}`);
        updateVerificationProgress(0);
      }
    } catch (err) {
      console.error(err);
      updateStatus("Connection failed. Try again.");
      updateVerificationProgress(0);
    }
  }

  function handleLogoClick() {
    const now = new Date().getTime();
    if (now - lastClickTime > 3000) logoClickCount = 1;
    else logoClickCount++;
    lastClickTime = now;

    if (logoClickCount === 5) {
      alert("𝕏 Easter Egg Unlocked: Follow @Y2K_Finance");
      logoClickCount = 0;
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("connectBtn").addEventListener("click", connectWallet);
    document.getElementById("logoTrigger").addEventListener("click", handleLogoClick);
  });
</script>
</body>
</html>
